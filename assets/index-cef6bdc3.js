import{J as e,X as s,F as t,c as a,a6 as r,h as l,o,H as i,g as n}from"./index-12fcb1ba.js";import{H as c}from"./HorizontalScroll-55be4d6e.js";import{y as m,x as d}from"./@vkontakte/icons-ec9bb119.js";import{A as _}from"./Avatar-de2956ae.js";import{C as h}from"./Caption-0505d051.js";const u="_HorizontalCell_1q642_1",y="_HorizontalCell__image_1q642_5",f="_HorizontalCell__body_1q642_10",p="_HorizontalCell__content_1q642_21",z="_HorizontalCell__subtitle_1q642_27",b={s:"_HorizontalCell--size-s_1q642_35",m:"_HorizontalCell--size-m_1q642_62",l:"_HorizontalCell--size-l_1q642_68"},g=({size:e,children:s,...t})=>m("s"===e?h:r,t,s),N=({className:r,header:l,style:o,subtitle:i,size:n="s",children:c=m(_,{size:56}),getRootRef:d,getRef:h,extraSubtitle:N,...v})=>m("div",{ref:d,style:o,className:a(u,b[n],r)},m(e,{className:f,getRootRef:h,...v},s(c)&&m("div",{className:y},c),(l||i||N)&&m("div",{className:p},s(l)&&m(g,{size:n},l),s(i)&&m(t,{className:z},i),s(N)&&m(t,{className:z},N)))),v=e=>{const s=e.split(".");return new Date(Number(s[2]),Number(s[1])-1,Number(s[0]))},H=({day:e,lessonGrades:s})=>o("div",{children:[o(i,{mode:"secondary",children:e}),o("div",{style:{display:"flex"},children:Object.entries(s).map((([s,t])=>o("div",{style:{display:"flex"},children:t.map(((t,a)=>{return o(N,{style:{maxWidth:"unset"},children:o(n,{bottom:(r=s,l=18,r.length>l?`${r.substring(0,l)}...`:r),style:{maxWidth:90},mark:t||"Ð",useMargin:!1,size:"l"})},`${e}_${s}_${a}`);var r,l}))},`${e}_${s}`)))})]},e),j=d((({performanceData:e})=>{const s=(e=>{const s={};return e?.daysWithMarksForSubject?.forEach((e=>{e?.daysWithMarks?.forEach((t=>{const a=new Date(t.day).toLocaleDateString(),r=t.markValues.map((e=>Number(l[e]))),o=e.subjectName;r.length>0&&r.every((e=>!Number.isNaN(parseFloat(String(e)))))&&(s[a]||(s[a]={}),s[a][o]||(s[a][o]=[]),s[a][o]=[...s[a][o],...r])}))})),s})(e),t=(e=>{const s=Object.keys(e).sort(((e,s)=>v(s).getTime()-v(e).getTime())),t={};return s.forEach((s=>{t[s]=e[s]})),t})(s);return o(c,{showArrows:!0,getScrollToLeft:e=>e-120,getScrollToRight:e=>e+120,children:o("div",{style:{display:"flex"},children:Object.entries(t).map((([e,s])=>o(H,{day:e,lessonGrades:s})))})})}));export{j as default};

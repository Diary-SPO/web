var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,s=(t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,l=(e,t)=>{for(var r in t||(t={}))o.call(t,r)&&s(e,r,t[r]);if(n)for(var r of n(t))a.call(t,r)&&s(e,r,t[r]);return e},i=(e,n)=>t(e,r(n));import{h as u,T as d,b as c,F as p,y as m}from"./@vkontakte/icons-d137ec12.js";import{s as b,i as f,n as v,aA as y,aB as P,t as k,Y as h,aC as _,Z as E,aD as O,a8 as A,aE as R,aF as w,ay as g,c as j}from"./index-716dd2fc.js";let x={bottom:null,top:null,left:null,right:null};function I(e=!1){const[t,r]=u(x);return b((()=>{if(e)return;const t=e=>{const t=function(e){const{type:t,data:r}=e.detail;switch(t){case"VKWebAppUpdateConfig":case"VKWebAppUpdateInsets":const{insets:e}=r;if(e)return i(l({},e),{bottom:e.bottom>150?0:e.bottom})}return null}(e);t&&r(t)};return f.subscribe(t),()=>{f.unsubscribe(t)}}),[e]),t}const L="_AppRoot_anbkk_1",C="_AppRoot--pointer-has-not_anbkk_5",F="_AppRoot--pointer-none_anbkk_25",K={none:"vkui--sizeX-none",[h.REGULAR]:"vkui--sizeX-regular"},T={card:"vkui--layout-card",plain:"vkui--layout-plain"};const z="--vkui_internal--safe_area_inset_",N=e=>{var t=e,{children:r,mode:s="full",scroll:i="global",portalRoot:f=null,disablePortal:x,disableParentTransformForPositionFixedElements:N,className:U,safeAreaInsets:X,layout:B}=t,D=((e,t)=>{var r={};for(var s in e)o.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&n)for(var s of n(e))t.indexOf(s)<0&&a.call(e,s)&&(r[s]=e[s]);return r})(t,["children","mode","scroll","portalRoot","disablePortal","disableParentTransformForPositionFixedElements","className","safeAreaInsets","layout"]);const V=function(){const{document:e}=v(),[t,r]=u(!1),n=d((()=>{r(!0)}),[]),o=d((e=>{y(e)===P.TAB&&n()}),[n]),a=d((()=>{r(!1)}),[]),s={passive:!0,capture:!0};return k(e,"keydown",o,s),k(e,"mousedown",a,s),k(e,"touchstart",a,s),k(e,"enableKeyboardInput",n,s),k(e,"disableKeyboardInput",a,s),t}(),W=c(null),[$,G]=u(null),{document:M}=v(),S=I(!X),Y=X||S,Z=_(),{hasPointer:q,sizeX:H="none"}=E();b((()=>{let e=null;return f&&(e=O(f)?f.current:f),e||(e=M.createElement("div"),M.body.appendChild(e)),G(e),()=>{var t;f||null==(t=null==e?void 0:e.parentElement)||t.removeChild(e)}}),[f]),b((()=>{var e;if("partial"===s)return A;const t=null==(e=W.current)?void 0:e.parentElement,r=["vkui__root"].concat("embedded"===s?"vkui__root--embedded":[]);return t&&("embedded"!==s||N||(t.style.transform="translate3d(0, 0, 0)"),t.classList.add(...r)),()=>{t&&("embedded"!==s||N||(t.style.transform=""),t.classList.remove(...r))}}),[N]),b((()=>{if("full"===s)return M.documentElement.classList.add("vkui"),()=>{M.documentElement.classList.remove("vkui")}}),[M,s]),b((()=>{var e;if("partial"===s||!(null==(e=W.current)?void 0:e.parentElement))return A;const t=W.current.parentElement;let r;for(r in Y)if(Y.hasOwnProperty(r)&&"number"==typeof Y[r]){const e=Y[r];t.style.setProperty(z+r,`${e}px`),$&&$.style.setProperty(z+r,`${e}px`)}return()=>{let e;for(e in Y)Y.hasOwnProperty(e)&&(t.style.removeProperty(z+e),$&&$.style.removeProperty(z+e))}}),[Y,$]),b((()=>{var e;if("partial"===s)return A;const t=function(e,t){const r=[];return e&&r.push(T[e]),t!==h.COMPACT&&r.push(K[t]),r}(B,H),r="embedded"===s?null==(e=W.current)?void 0:e.parentElement:M.body;return t.length&&r?(r.classList.add(...t),()=>{r.classList.remove(...t)}):A}),[H,B]),b((()=>"full"!==s||void 0===Z?A:(M.documentElement.style.setProperty("color-scheme",Z),()=>M.documentElement.style.removeProperty("color-scheme"))),[Z]);const J=p((()=>"contain"===i?R:w),[i]),Q=m(g.Provider,{value:{appRoot:W,portalRoot:$,embedded:"embedded"===s,keyboardInput:V,mode:s,disablePortal:x,layout:B}},m(J,{elRef:W},r));return"partial"===s?Q:m("div",l({ref:W,className:j(L,void 0===q?F:!q&&C,U)},D),Q)};export{N as A};

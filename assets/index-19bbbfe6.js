var e=Object.defineProperty,r=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,l=(r,t,a)=>t in r?e(r,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[t]=a,s=(e,l)=>{var s={};for(var o in e)t.call(e,o)&&l.indexOf(o)<0&&(s[o]=e[o]);if(null!=e&&r)for(var o of r(e))l.indexOf(o)<0&&a.call(e,o)&&(s[o]=e[o]);return s};import{B as o,V as i,F as n,c,a4 as d,e as m,o as u,H as _,f}from"./index-716dd2fc.js";import{H as b}from"./HorizontalScroll-dc2cd0e8.js";import{y,x as p}from"./@vkontakte/icons-d137ec12.js";import{A as h}from"./Avatar-fa3f7afc.js";import{C as v}from"./Caption-ba308cb2.js";const g="_HorizontalCell_1q642_1",z="_HorizontalCell__image_1q642_5",N="_HorizontalCell__body_1q642_10",j="_HorizontalCell__content_1q642_21",x="_HorizontalCell__subtitle_1q642_27",H={s:"_HorizontalCell--size-s_1q642_35",m:"_HorizontalCell--size-m_1q642_62",l:"_HorizontalCell--size-l_1q642_68"},O=e=>{var r=e,{size:t,children:a}=r,l=s(r,["size","children"]);return y("s"===t?v:d,l,a)},C=e=>{var d=e,{className:m,header:u,style:_,subtitle:f,size:b="s",children:p=y(h,{size:56}),getRootRef:v,getRef:C,extraSubtitle:R}=d,S=s(d,["className","header","style","subtitle","size","children","getRootRef","getRef","extraSubtitle"]);return y("div",{ref:v,style:_,className:c(g,H[b],m)},y(o,((e,s)=>{for(var o in s||(s={}))t.call(s,o)&&l(e,o,s[o]);if(r)for(var o of r(s))a.call(s,o)&&l(e,o,s[o]);return e})({className:N,getRootRef:C},S),i(p)&&y("div",{className:z},p),(u||f||R)&&y("div",{className:j},i(u)&&y(O,{size:b},u),i(f)&&y(n,{className:x},f),i(R)&&y(n,{className:x},R))))},R=e=>{const r=e.split(".");return new Date(Number(r[2]),Number(r[1])-1,Number(r[0]))},S=({day:e,lessonGrades:r})=>u("div",{children:[u(_,{mode:"secondary",children:e}),u("div",{style:{display:"flex"},children:Object.entries(r).map((([r,t])=>u("div",{style:{display:"flex"},children:t.map(((t,a)=>{return u(C,{style:{maxWidth:"unset"},children:u(f,{bottom:(l=r,s=18,l.length>s?`${l.substring(0,s)}...`:l),style:{maxWidth:90},mark:t||"Н",useMargin:!1,size:"l"})},`${e}_${r}_${a}`);var l,s}))},`${e}_${r}`)))})]},e),q=p((({performanceData:e})=>{const r=(e=>{var r;const t={};return null==(r=null==e?void 0:e.daysWithMarksForSubject)||r.forEach((e=>{var r;null==(r=null==e?void 0:e.daysWithMarks)||r.forEach((r=>{const a=new Date(r.day).toLocaleDateString(),l=r.markValues.map((e=>Number(m[e]))),s=e.subjectName;l.length>0&&l.every((e=>!Number.isNaN(parseFloat(String(e)))))&&(t[a]||(t[a]={}),t[a][s]||(t[a][s]=[]),t[a][s]=[...t[a][s],...l])}))})),t})(e),t=(e=>{const r=Object.keys(e).sort(((e,r)=>R(r).getTime()-R(e).getTime())),t={};return r.forEach((r=>{t[r]=e[r]})),t})(r);return u(b,{showArrows:!0,getScrollToLeft:e=>e-120,getScrollToRight:e=>e+120,children:u("div",{style:{display:"flex"},children:Object.entries(t).map((([e,r])=>u(S,{day:e,lessonGrades:r})))})})}));export{q as default};

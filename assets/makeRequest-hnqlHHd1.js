import{y as t,V as e}from"./@vkontakte/icons-Hmxnb1rK.js";const a=(a,o,r,n,s)=>{if(418===a){const a=t(e,{fill:"var(--vkui--color_icon_negative)"});return s&&s({icon:a,title:"Ошибка при попытке сделать запрос",subtitle:"Попробуйте обновить страницу или обновите куки в настройках"}),n(!1),void o()}if(429===a)return r(),o(),void n(!1)},o="https://api.spo-diary.ru",r="https://dnevnik3.kopchan7.keenetic.link",n=async t=>{var e;const a=null!=(e=localStorage.getItem("cookie"))?e:sessionStorage.getItem("cookie"),n=`${o}${t}`;if(!a)return 418;try{const e=await fetch(o+t,{method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8",secret:a}});if(429===e.status)return e.status;if(!e.ok){const e=await fetch(r+t,{method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8",secret:a}});if(429===e.status)return e.status;if(!e.ok)throw new Error(`Failed to fetch data from ${n} and SECOND_SERVER`);return await e.json()}return await e.json()}catch(e){const o=await fetch(r+t,{method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8",secret:a}});if(429===o.status)return o.status;if(!o.ok)throw new Error(`Failed to fetch data from ${n} and SECOND_SERVER`);return await o.json()}};export{a as h,n as m};

var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,s=(t,r,o)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[r]=o,l=(e,t)=>{for(var r in t||(t={}))n.call(t,r)&&s(e,r,t[r]);if(o)for(var r of o(t))a.call(t,r)&&s(e,r,t[r]);return e},i=(e,o)=>t(e,r(o));import{h as u,T as d,b as c,c as p,y as m}from"./@vkontakte/icons-Hmxnb1rK.js";import{s as b,j as f,o as v,ay as y,az as P,t as k,W as h,aA as _,X as E,aB as O,a6 as A,aC as w,aD as R,aw as j,c as g}from"./index-V8iVre27.js";let x={bottom:null,top:null,left:null,right:null};function I(e=!1){const[t,r]=u(x);return b((()=>{if(e)return;const t=e=>{const t=function(e){const{type:t,data:r}=e.detail;switch(t){case"VKWebAppUpdateConfig":case"VKWebAppUpdateInsets":const{insets:e}=r;if(e)return i(l({},e),{bottom:e.bottom>150?0:e.bottom})}return null}(e);t&&r(t)};return f.subscribe(t),()=>{f.unsubscribe(t)}}),[e]),t}const L="_AppRoot_anbkk_1",C="_AppRoot--pointer-has-not_anbkk_5",z="_AppRoot--pointer-none_anbkk_25",F={none:"vkui--sizeX-none",[h.REGULAR]:"vkui--sizeX-regular"},K={card:"vkui--layout-card",plain:"vkui--layout-plain"};const T="--vkui_internal--safe_area_inset_",X=e=>{var t=e,{children:r,mode:s="full",scroll:i="global",portalRoot:f=null,disablePortal:x,disableParentTransformForPositionFixedElements:X,className:N,safeAreaInsets:U,layout:W}=t,B=((e,t)=>{var r={};for(var s in e)n.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&o)for(var s of o(e))t.indexOf(s)<0&&a.call(e,s)&&(r[s]=e[s]);return r})(t,["children","mode","scroll","portalRoot","disablePortal","disableParentTransformForPositionFixedElements","className","safeAreaInsets","layout"]);const D=function(){const{document:e}=v(),[t,r]=u(!1),o=d((()=>{r(!0)}),[]),n=d((e=>{y(e)===P.TAB&&o()}),[o]),a=d((()=>{r(!1)}),[]),s={passive:!0,capture:!0};return k(e,"keydown",n,s),k(e,"mousedown",a,s),k(e,"touchstart",a,s),k(e,"enableKeyboardInput",o,s),k(e,"disableKeyboardInput",a,s),t}(),V=c(null),[$,G]=u(null),{document:M}=v(),S=I(!U),q=U||S,H=_(),{hasPointer:J,sizeX:Q="none"}=E();b((()=>{let e=null;return f&&(e=O(f)?f.current:f),e||(e=M.createElement("div"),M.body.appendChild(e)),G(e),()=>{var t;f||null==(t=null==e?void 0:e.parentElement)||t.removeChild(e)}}),[f]),b((()=>{var e;if("partial"===s)return A;const t=null==(e=V.current)?void 0:e.parentElement,r=["vkui__root"].concat("embedded"===s?"vkui__root--embedded":[]);return t&&("embedded"!==s||X||(t.style.transform="translate3d(0, 0, 0)"),t.classList.add(...r)),()=>{t&&("embedded"!==s||X||(t.style.transform=""),t.classList.remove(...r))}}),[X]),b((()=>{if("full"===s)return M.documentElement.classList.add("vkui"),()=>{M.documentElement.classList.remove("vkui")}}),[M,s]),b((()=>{var e;if("partial"===s||!(null==(e=V.current)?void 0:e.parentElement))return A;const t=V.current.parentElement;let r;for(r in q)if(q.hasOwnProperty(r)&&"number"==typeof q[r]){const e=q[r];t.style.setProperty(T+r,`${e}px`),$&&$.style.setProperty(T+r,`${e}px`)}return()=>{let e;for(e in q)q.hasOwnProperty(e)&&(t.style.removeProperty(T+e),$&&$.style.removeProperty(T+e))}}),[q,$]),b((()=>{var e;if("partial"===s)return A;const t=function(e,t){const r=[];return e&&r.push(K[e]),t!==h.COMPACT&&r.push(F[t]),r}(W,Q),r="embedded"===s?null==(e=V.current)?void 0:e.parentElement:M.body;return t.length&&r?(r.classList.add(...t),()=>{r.classList.remove(...t)}):A}),[Q,W]),b((()=>"full"!==s||void 0===H?A:(M.documentElement.style.setProperty("color-scheme",H),()=>M.documentElement.style.removeProperty("color-scheme"))),[H]);const Y=p((()=>"contain"===i?w:R),[i]),Z=m(j.Provider,{value:{appRoot:V,portalRoot:$,embedded:"embedded"===s,keyboardInput:D,mode:s,disablePortal:x,layout:W}},m(Y,{elRef:V},r));return"partial"===s?Z:m("div",l({ref:V,className:g(L,void 0===J?z:!J&&C,N)},B),Z)};export{X as A};

import{y as t,V as e}from"./@vkontakte/icons-Hmxnb1rK.js";const o=(o,a,r,n,s)=>{if(418===o){const o=t(e,{fill:"var(--vkui--color_icon_negative)"});return s&&s({icon:o,title:"Ошибка при попытке сделать запрос",subtitle:"Попробуйте обновить страницу или обновите куки в настройках"}),n(!1),void a()}if(429===o)return r(),a(),void n(!1)},a="https://dnevnik3.kopchan7.keenetic.link",r="https://dev.spo-diary.ru",n=async t=>{var e;const o=null!=(e=localStorage.getItem("cookie"))?e:sessionStorage.getItem("cookie"),n=`${a}${t}`;if(!o)return 418;try{const e=await fetch(a+t,{method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8",secret:o}});if(429===e.status)return e.status;if(!e.ok){const e=await fetch(r+t,{method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8",secret:o}});if(429===e.status)return e.status;if(!e.ok)throw new Error(`Failed to fetch data from ${n} and SECOND_SERVER`);return await e.json()}return await e.json()}catch(e){const a=await fetch(r+t,{method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8",secret:o}});if(429===a.status)return a.status;if(!a.ok)throw new Error(`Failed to fetch data from ${n} and SECOND_SERVER`);return await a.json()}};export{o as h,n as m};

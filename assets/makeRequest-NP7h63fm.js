const t=async(t,e,a,s)=>{const n=await fetch("https://dnevnik4.kopchan7.keenetic.link"+t,{method:a,headers:{"Content-Type":"application/json;charset=UTF-8",secret:e},body:s});return 429===n.status?n.status:n.ok?await n.json():n.status},e=async(e,a="GET",s)=>{const n=localStorage.getItem("token"),o=`https://api.spo-diary.ru/v1${e}`,r=new AbortController,c=setTimeout((()=>r.abort()),3e3);try{const i=await fetch(o,{method:a,headers:{"Content-Type":"application/json;charset=UTF-8",secret:n},body:s,signal:r.signal});return clearTimeout(c),429!==i.status&&i.ok?await i.json():t(e,n,a,s)}catch(o){return o.name,t(e,n,a,s)}};export{e as m};

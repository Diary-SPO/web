import{_ as t,u as e,L as s,e as n}from"./index-SX1lXMFJ.js";import{B as a}from"./Button-bpYq3XKW.js";import{P as o}from"./Panel-XyuQqBP3.js";import{B as r}from"./ButtonGroup-xZcXDOMO.js";import{D as i}from"./Div-jziiDKwi.js";import{E as l,h as m,T as c,p as d}from"./@vkontakte/icons-HJ4wZ9QE.js";import{h as u}from"./handleResponse-kGkHOE9v.js";import{P as p}from"./PanelHeaderWithBack-wl74DD54.js";import{u as f}from"./useRateLimitExceeded-UfLif6eK.js";import{m as j}from"./makeRequest-NP7h63fm.js";import"./Snackbar-bxUP9_Qf.js";const h=l((()=>t((()=>import("./SubjectsList-bgLLhYlR.js")),__vite__mapDeps([0,1,2,3,4,5])))),k=({id:t})=>{const[s,n]=m(!1),[a,r]=m(!1),[l,k]=m(null),_=c((async()=>{r(!0),n(!1);try{const t=await(async()=>{const t=localStorage.getItem("token"),e=localStorage.getItem("id");return t?j(`/attestation/${e}`):418})();u(t,(()=>{n(!0),r(!1)}),(()=>{f(),n(!0),r(!1)}),(t=>{r(t)})),k(t)}catch(t){n(!0)}finally{r(!1)}}),[]);d((()=>{_()}),[]);const g={};let b=null,y=null;if((null==l?void 0:l.students)&&(y=l.year,b=`\n    ${l.students[0].lastName}\n    ${l.students[0].firstName.slice(0,1)}.\n    ${l.students[0].middleName.slice(0,1)}.`),null==l?void 0:l.subjects){const t=`Семестр ${l.termNumber}`;g[t]||(g[t]=[]);for(const e of l.subjects)g[t].push(e)}return e(o,{nav:t,children:[e(p,{title:"Аттестация"}),e(i,{children:[e(h,{isDataLoading:a,semesters:g,studentName:b,year:y}),s&&e(v,{onClick:_})]})]})},v=({onClick:t})=>e(n,{header:"Ошибка при загрузке",action:e(r,{mode:"vertical",align:"center",children:[e(a,{size:"s",onClick:t,children:"Попробовать снова"}),e(s,{href:"https://vk.me/dnevnik_spo",target:"_blank",children:"Сообщить о проблеме"})]})});export{k as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/SubjectsList-bgLLhYlR.js","assets/index-SX1lXMFJ.js","assets/@vkontakte/icons-HJ4wZ9QE.js","assets/index-ZDfR2gLr.css","assets/Div-jziiDKwi.js","assets/Div-T3SmsJ_a.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
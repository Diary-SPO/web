var e=Object.defineProperty,r=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,a=(r,t,l)=>t in r?e(r,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):r[t]=l,s=(e,a)=>{var s={};for(var o in e)t.call(e,o)&&a.indexOf(o)<0&&(s[o]=e[o]);if(null!=e&&r)for(var o of r(e))a.indexOf(o)<0&&l.call(e,o)&&(s[o]=e[o]);return s};import{B as o,Q as i,F as n,c,a2 as d,f as m,u,H as _,g as f}from"./index-V8iVre27.js";import{H as b}from"./HorizontalScroll-QF3GDDJv.js";import{y,w as h}from"./@vkontakte/icons-Hmxnb1rK.js";import{A as p}from"./Avatar-X0XfkpYb.js";import{C as v}from"./Caption-Tqc2m0m-.js";const g="_HorizontalCell_1q642_1",z="_HorizontalCell__image_1q642_5",N="_HorizontalCell__body_1q642_10",j="_HorizontalCell__content_1q642_21",x="_HorizontalCell__subtitle_1q642_27",H={s:"_HorizontalCell--size-s_1q642_35",m:"_HorizontalCell--size-m_1q642_62",l:"_HorizontalCell--size-l_1q642_68"},O=e=>{var r=e,{size:t,children:l}=r,a=s(r,["size","children"]);return y("s"===t?v:d,a,l)},C=e=>{var d=e,{className:m,header:u,style:_,subtitle:f,size:b="s",children:h=y(p,{size:56}),getRootRef:v,getRef:C,extraSubtitle:R}=d,q=s(d,["className","header","style","subtitle","size","children","getRootRef","getRef","extraSubtitle"]);return y("div",{ref:v,style:_,className:c(g,H[b],m)},y(o,((e,s)=>{for(var o in s||(s={}))t.call(s,o)&&a(e,o,s[o]);if(r)for(var o of r(s))l.call(s,o)&&a(e,o,s[o]);return e})({className:N,getRootRef:C},q),i(h)&&y("div",{className:z},h),(u||f||R)&&y("div",{className:j},i(u)&&y(O,{size:b},u),i(f)&&y(n,{className:x},f),i(R)&&y(n,{className:x},R))))},R=e=>{const r=e.split(".");return new Date(Number(r[2]),Number(r[1])-1,Number(r[0]))},q=({day:e,lessonGrades:r})=>u("div",{children:[u(_,{mode:"secondary",children:e}),u("div",{style:{display:"flex"},children:Object.entries(r).map((([r,t])=>u("div",{style:{display:"flex"},children:t.map(((t,l)=>{return u(C,{style:{maxWidth:"unset"},children:u(f,{bottom:(a=r,s=18,a.length>s&&0!==s?`${a.substring(0,s)}...`:a),style:{maxWidth:90},mark:t||"Н",useMargin:!1,size:"l"})},`${e}_${r}_${l}`);var a,s}))},`${e}_${r}`)))})]},e),S=h((({performanceData:e})=>{const r=(e=>{var r;const t={};return null==(r=null==e?void 0:e.daysWithMarksForSubject)||r.forEach((e=>{var r;null==(r=null==e?void 0:e.daysWithMarks)||r.forEach((r=>{const l=new Date(r.day).toLocaleDateString(),a=e.subjectName,s=r.markValues.filter((e=>void 0!==m[e])).map((e=>Number(m[e])));s.length>0&&(t[l]||(t[l]={}),t[l][a]||(t[l][a]=[]),s.every((e=>!Number.isNaN(e)))&&t[l][a].push(...s))}))})),t})(e),t=(e=>{const r=Object.keys(e).sort(((e,r)=>R(r).getTime()-R(e).getTime())),t={};return r.forEach((r=>{t[r]=e[r]})),t})(r);return u(b,{showArrows:!0,getScrollToLeft:e=>e-120,getScrollToRight:e=>e+120,children:u("div",{style:{display:"flex"},children:Object.entries(t).map((([e,r])=>u(q,{day:e,lessonGrades:r})))})})}));export{S as default};

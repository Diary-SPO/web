import{y as t,V as e}from"./@vkontakte/icons-ec9bb119.js";const a=(a,o,s,n,r)=>{if(418===a){const a=t(e,{fill:"var(--vkui--color_icon_negative)"});return r&&r({icon:a,title:"Ошибка при попытке сделать запрос",subtitle:"Попробуйте обновить страницу или обновите куки в настройках"}),n(!1),void o()}429===a&&(s(),o(),n(!1))},o="https://api.spo-diary.ru",s="https://dnevnik2.kopchan7.keenetic.link",n=async t=>{const e=localStorage.getItem("cookie")??sessionStorage.getItem("cookie"),a=`${o}${t}`;if(!e)return 418;try{const n=await fetch(o+t,{method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8",secret:e}});if(429===n.status)return n.status;if(!n.ok){const o=await fetch(s+t,{method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8",secret:e}});if(429===o.status)return o.status;if(!o.ok)throw new Error(`Failed to fetch data from ${a} and SECOND_SERVER`);return await o.json()}return await n.json()}catch(o){const n=await fetch(s+t,{method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8",secret:e}});if(429===n.status)return n.status;if(!n.ok)throw new Error(`Failed to fetch data from ${a} and SECOND_SERVER`);return await n.json()}};export{a as h,n as m};

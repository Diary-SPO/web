var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,l=(t,r,o)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[r]=o,s=(e,t)=>{for(var r in t||(t={}))n.call(t,r)&&l(e,r,t[r]);if(o)for(var r of o(t))a.call(t,r)&&l(e,r,t[r]);return e},i=(e,o)=>t(e,r(o));import{h as u,T as d,e as c,f as p,y as m}from"./@vkontakte/icons-HJ4wZ9QE.js";import{s as b,l as f,o as v,aF as y,aG as P,t as k,W as h,aH as _,X as E,aI as O,a5 as A,aJ as R,aK as w,aB as g,c as j}from"./index-SX1lXMFJ.js";let x={bottom:null,top:null,left:null,right:null};function I(e=!1){const[t,r]=u(x);return b((()=>{if(e)return;const t=e=>{const t=function(e){const{type:t,data:r}=e.detail;switch(t){case"VKWebAppUpdateConfig":case"VKWebAppUpdateInsets":const{insets:e}=r;if(e)return i(s({},e),{bottom:e.bottom>150?0:e.bottom})}return null}(e);t&&r(t)};return f.subscribe(t),()=>{f.unsubscribe(t)}}),[e]),t}const L="_AppRoot_anbkk_1",C="_AppRoot--pointer-has-not_anbkk_5",F="_AppRoot--pointer-none_anbkk_25",K={none:"vkui--sizeX-none",[h.REGULAR]:"vkui--sizeX-regular"},T={card:"vkui--layout-card",plain:"vkui--layout-plain"};const X="--vkui_internal--safe_area_inset_",z=e=>{var t=e,{children:r,mode:l="full",scroll:i="global",portalRoot:f=null,disablePortal:x,disableParentTransformForPositionFixedElements:z,className:B,safeAreaInsets:N,layout:U}=t,W=((e,t)=>{var r={};for(var l in e)n.call(e,l)&&t.indexOf(l)<0&&(r[l]=e[l]);if(null!=e&&o)for(var l of o(e))t.indexOf(l)<0&&a.call(e,l)&&(r[l]=e[l]);return r})(t,["children","mode","scroll","portalRoot","disablePortal","disableParentTransformForPositionFixedElements","className","safeAreaInsets","layout"]);const G=function(){const{document:e}=v(),[t,r]=u(!1),o=d((()=>{r(!0)}),[]),n=d((e=>{y(e)===P.TAB&&o()}),[o]),a=d((()=>{r(!1)}),[]),l={passive:!0,capture:!0};return k(e,"keydown",n,l),k(e,"mousedown",a,l),k(e,"touchstart",a,l),k(e,"enableKeyboardInput",o,l),k(e,"disableKeyboardInput",a,l),t}(),V=c(null),[$,D]=u(null),{document:H}=v(),J=I(Boolean(N)),M=N||J,S=_(),{hasPointer:q,sizeX:Q="none"}=E();b((()=>{let e=null;return f&&(e=O(f)?f.current:f),e||(e=H.createElement("div"),H.body.appendChild(e)),D(e),()=>{var t;f||null==(t=null==e?void 0:e.parentElement)||t.removeChild(e)}}),[f]),b((()=>{var e;if("partial"===l)return A;const t=null==(e=V.current)?void 0:e.parentElement,r=["vkui__root"].concat("embedded"===l?"vkui__root--embedded":[]);return t&&("embedded"!==l||z||(t.style.transform="translate3d(0, 0, 0)"),t.classList.add(...r)),()=>{t&&("embedded"!==l||z||(t.style.transform=""),t.classList.remove(...r))}}),[z]),b((()=>{if("full"===l)return H.documentElement.classList.add("vkui"),()=>{H.documentElement.classList.remove("vkui")}}),[H,l]),b((()=>{var e;if("partial"===l||!(null==(e=V.current)?void 0:e.parentElement))return A;const t=V.current.parentElement;let r;for(r in M)if(M.hasOwnProperty(r)&&"number"==typeof M[r]){const e=M[r];t.style.setProperty(X+r,`${e}px`),$&&$.style.setProperty(X+r,`${e}px`)}return()=>{let e;for(e in M)M.hasOwnProperty(e)&&(t.style.removeProperty(X+e),$&&$.style.removeProperty(X+e))}}),[M,$]),b((()=>{var e;if("partial"===l)return A;const t=function(e,t){const r=[];return e&&r.push(T[e]),t!==h.COMPACT&&r.push(K[t]),r}(U,Q),r="embedded"===l?null==(e=V.current)?void 0:e.parentElement:H.body;return t.length&&r?(r.classList.add(...t),()=>{r.classList.remove(...t)}):A}),[Q,U]),b((()=>"full"!==l||void 0===S?A:(H.documentElement.style.setProperty("color-scheme",S),()=>H.documentElement.style.removeProperty("color-scheme"))),[S]);const Y=p((()=>"contain"===i?R:w),[i]),Z=m(g.Provider,{value:{appRoot:V,portalRoot:$,embedded:"embedded"===l,keyboardInput:G,mode:l,disablePortal:x,layout:U}},m(Y,{elRef:V},r));return"partial"===l?Z:m("div",s({ref:V,className:j(L,void 0===q?F:!q&&C,B)},W),Z)};export{z as A};

var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,n=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,i=(e,t)=>{for(var a in t||(t={}))o.call(t,a)&&n(e,a,t[a]);if(r)for(var a of r(t))s.call(t,a)&&n(e,a,t[a]);return e},l=(e,r)=>t(e,a(r)),c=(e,t)=>{var a={};for(var n in e)o.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&r)for(var n of r(e))t.indexOf(n)<0&&s.call(e,n)&&(a[n]=e[n]);return a};import{y as _,l as d,h as m,e as u,T as f,o as p,p as h,a0 as y,a1 as b,a2 as g}from"./@vkontakte/icons-HJ4wZ9QE.js";import{m as j,q as k,c as A,B as C,h as v,T as w,F as q,D as N,I as O,J as S,K as R,N as I,O as B,Q as P,U as x,V as z,S as L,W as M,X as V,Y as K,Z as T,$ as F,a0 as H,b as W,u as Y,G as D,H as $,a1 as E,a2 as G,l as U}from"./index--wYC2PF4.js";import{P as J}from"./Panel-fPJSZPud.js";import{I as Q}from"./IconButton-H1XV_e6Q.js";import{B as X}from"./Button-YcANNQ5j.js";import{C as Z}from"./Caption-HfoC45Uo.js";import{P as ee}from"./PanelHeaderWithBack-EZo8V8Fv.js";import{u as te}from"./useSnackbar-1tYziyFU.js";import"./Snackbar-HLSVggkW.js";const ae="_Alert_qrjrf_1",re="_Alert--desktop_qrjrf_16",oe="_Alert--closing_qrjrf_20",se="_Alert__content_qrjrf_38",ne="_Alert__content--withButton_qrjrf_43",ie="_Alert__action_qrjrf_47",le="_Alert__actions_qrjrf_52",ce="_Alert__header_qrjrf_59",_e="_Alert__text_qrjrf_63",de="_Alert--ios_qrjrf_106",me="_Alert__action--mode-cancel_qrjrf_241",ue="_Alert__action--mode-destructive_qrjrf_245",fe="_Alert--vkcom_qrjrf_253",pe="_Alert__button_qrjrf_266",he="_Alert__button--mode-cancel_qrjrf_270",ye="_Alert__dismiss_qrjrf_274",be=e=>{var t=e,{mode:a}=t,r=c(t,["mode"]);return _(C,i({Component:r.href?"a":"button",className:A(ie,"destructive"===a&&ue,"cancel"===a&&me)},r))},ge=e=>{var t=e,{mode:a}=t,r=c(t,["mode"]);let o="tertiary";return j()===k.VKCOM&&(o="cancel"===a?"secondary":"primary"),_(X,i({className:A(pe,"cancel"===a&&he),mode:o,size:"m"},r))},je=e=>j()===k.IOS?_(be,e):_(ge,e),ke={left:"_Alert__actions--align-left_qrjrf_87",center:"_Alert__actions--align-center_qrjrf_92",right:"_Alert__actions--align-right_qrjrf_97"},Ae={vertical:"_Alert__actions--direction-vertical_qrjrf_76",horizontal:"_Alert__actions--direction-horizontal_qrjrf_72"},Ce=({actions:e=[],renderAction:t=(e=>_(je,e)),onItemClick:a,actionsAlign:r,actionsLayout:o})=>{const s=j()===k.VKCOM?"horizontal":o;return _("div",{className:A(le,r&&ke[r],s&&Ae[s])},e.map(((e,r)=>{const o=e,{title:s,action:n,autoClose:l}=o,m=c(o,["title","action","autoClose"]);return _(d,{key:r},t(i({children:s,onClick:()=>a(e)},m)))})))},ve=e=>j()===k.IOS?_(v,i({className:ce,weight:"1",level:"3"},e)):_(v,i({className:ce,weight:"2",level:"2"},e)),we=e=>{switch(j()){case k.VKCOM:return _(q,i({className:_e},e));case k.IOS:return _(Z,i({className:_e},e));default:return _(w,i({Component:"span",className:_e,weight:"3"},e))}},qe=e=>{var t=e,{actions:a=[],actionsLayout:r="horizontal",children:o,className:s,style:n,text:d,header:h,onClose:y,dismissLabel:b="Закрыть предупреждение",renderAction:g,actionsAlign:C,dismissButtonMode:v="outside",getRootRef:w}=t,q=c(t,["actions","actionsLayout","children","className","style","text","header","onClose","dismissLabel","renderAction","actionsAlign","dismissButtonMode","getRootRef"]);const L=N(),M=`vkui-alert-${L}-header`,V=`vkui-alert-${L}-text`,K=j(),{isDesktop:T}=O(),{waitTransitionFinish:F}=S(),[H,W]=m(!1),Y=T&&K!==k.IOS,D=u(null),$=K===k.IOS?300:200,E=f((()=>{W(!0),F(D.current,(e=>{e&&"opacity"!==e.propertyName||y()}),$)}),[D,F,y,$]),G=f((e=>{const{action:t,autoClose:a}=e;a?(W(!0),F(D.current,(e=>{e&&"opacity"!==e.propertyName||(y(),t&&t())}),$)):t&&t()}),[D,F,y,$]);return R(),_(z,{className:s,closing:H,style:n,onClick:E,getRootRef:w},_(I,l(i({},q),{getRootRef:D,onClick:B,onClose:E,timeout:$,className:A(ae,K===k.IOS&&de,K===k.VKCOM&&fe,H&&oe,T&&re),role:"alertdialog","aria-modal":!0,"aria-labelledby":M,"aria-describedby":V}),_("div",{className:A(se,"inside"===v&&ne)},P(h)&&_(ve,{id:M},h),P(d)&&_(we,{id:V},d),o,Y&&"inside"===v&&_(Q,{"aria-label":b,className:A(ye,"vkuiInternalAlert__dismiss"),onClick:E,hoverMode:"opacity",activeMode:"opacity"},_(p,null))),_(Ce,{actions:a,actionsAlign:C,actionsLayout:r,renderAction:g,onItemClick:G}),Y&&"outside"===v&&_(x,{onClick:E,"aria-label":b})))},Ne="_CellButton_1uqh3_1",Oe="_CellButton--centered_1uqh3_29",Se="_CellButton--mode-danger_1uqh3_51",Re=e=>{var t=e,{centered:a=!1,mode:r="primary",className:o}=t,s=c(t,["centered","mode","className"]);return _(L,l(i({stopPropagation:!0},s),{className:A(Ne,"danger"===r&&Se,a&&Oe,o)}))},Ie="_Switch_prnkw_1",Be="_Switch--sizeY-compact_prnkw_16",Pe="_Switch--disabled_prnkw_30",xe="_Switch__pseudo_prnkw_34",ze="_Switch__self_prnkw_85",Le="_Switch--ios_prnkw_146",Me={none:"_Switch--sizeY-none_prnkw_23",[M.COMPACT]:Be},Ve=e=>{var t=e,{style:a,className:r,getRootRef:o,getRef:s}=t,n=c(t,["style","className","getRootRef","getRef"]);const d=j(),{sizeY:m="none"}=V(),{focusVisible:u,onBlur:f,onFocus:p}=K(),h=T({focusVisible:u,mode:"outside"});return _("label",{className:A(Ie,d===k.IOS&&Le,m!==M.REGULAR&&Me[m],n.disabled&&Pe,h,r),style:a,ref:o,onBlur:H(f,n.onBlur),onFocus:H(p,n.onFocus)},_(F,l(i({},n),{Component:"input",getRootRef:s,type:"checkbox",className:ze})),_("span",{"aria-hidden":!0,className:xe}))},Ke=({id:e})=>{const t=W(),[a,r]=m([]),[o,s]=m(!1),n=u(null),[i,l]=m(!1),[c,_]=te();h((()=>{(async()=>{await U.send("VKWebAppAddToHomeScreenInfo").then((({is_feature_supported:e})=>{e&&s(!0)})).catch((e=>{}))})()}),[]),h((()=>{const e=Object.keys(localStorage).map((e=>({key:e,value:localStorage.getItem(e)||"false"})));r(e)}),[]);const d=()=>{_({title:"Выход",icon:Y(b,{color:"var(--vkui--color_background_accent_themed)"}),subtitle:"После удаления всех данных вы попадёте на страницу авторизации"}),setTimeout((async()=>{try{await(async()=>{localStorage.clear(),window.location.reload()})(),await t.replace("/")}catch(e){}}),1500)},f=Y(qe,{actions:[{title:"Отмена",autoClose:!0,mode:"cancel"},{title:"Выйти",autoClose:!0,mode:"destructive",action:()=>d()}],actionsLayout:"horizontal",onClose:()=>t.hidePopout(),header:"Выход",text:"Вы уверены, что хотите выйти из аккаунта?"});return Y(J,{nav:e,children:[Y(ee,{title:"Настройки"}),Y(D,{header:Y($,{mode:"secondary",children:"Действия"}),children:[Y(Re,{Component:"label",after:Y(Ve,{getRef:n,defaultChecked:!0}),onChange:()=>l(!i),before:Y(y,{}),children:"Показывать тех. инфрмацию"}),Y(Re,{before:Y(b,{}),onClick:()=>t.showPopout(f),children:"Выйти"}),o&&Y(Re,{before:Y(g,{}),onClick:()=>{U.send("VKWebAppAddToHomeScreen").then((e=>{e.result})).catch((e=>{}))},children:"Добавить на экран"})]}),i&&Y(D,{header:Y($,{mode:"secondary",children:"Техническая информация"}),children:Y(D,{header:Y($,{mode:"secondary",aside:Y(E,{children:"Хранится в LocalStorage"}),children:"Кеш"}),children:a.map((e=>Y(L,{children:Y(G,{header:e.key,children:e.value.slice(0,30)})},e.key)))})}),c]})};export{Ke as default};
